## Оформление ответов по лабораторной работе
* Создать репозиторий на github.com или gitlab.com
* приложить в репозиторий  README.md с ответами и скриншотами экрана
* Задания отмеченные (*) являются дополнительными для самостоятельного разбора

---
## Утилиты для лабораторной
```bash
df
du
cp
mv
ls
ln
ldd
free
dd
lsblk
blkid
parted
fdisk 

```
* Самоятельно посмотрите man по каждой

---

## Посмотрим какие дисковые устройства и партиции есть в системе

```bash
lsblk
blkid
fdisk -l 
parted -l
```
* Какой размер дисков?
* Есть ли неразмеченное место на дисках?
* Какой размер партиций?
* Какая таблица партционирования используется?
* Какой диск, партция или лвм том смонтированы в /

---

## (*) При налиичии свободного дискового пространства создадим файловую систему и lvm
* вам понадобятся команды: parted/fdisk/gdisk, pvcreate, lvreate, vgcreate, mkfs
* примонтируйте полученную файловую систему
* снимите снэпшот
* удалите файл
* примонтируйте снэпшот рядом
* проверьте что ваш файл доступен
* задокументируйте все в README

---

## Создадим сжатую файловую систему для чтения squashfs
```bash
git clone https://gitlab.com/erlong15/mai.git
mksquashfs mai/* mai.sqsh
sudo mkdir /mnt/mai
sudo mount mai.sqsh /mnt/mai -t squashfs -o loop
```

---

## Посмотрим информацию по файловым системам смонтированным в системе

```bash
df -h
df -i
mount
```
* Какая файловая система примонтирована в /
* С какими опциями примонтирована файловая система в /
* Какой размер файловой системы приментированной в /mnt/mai

---

## Попробуем создать файлик в каталоге /dev/shm

```bash
dd if=/dev/zero of=/dev/shm/mai bs=1M count=100
free -h
rm -f /dev/shm/mai
free -h
```
* Что такое tmpfs
* какая часть памяти изменялась?

---

## Изучим процессы запущенные в системе

```bash
ps -eF
ps rx 
ps -e --forest
ps -efL
```

* Какие процессы в системе порождают дочерние процессы через fork
* Какие процессы в системе являются мультитредовыми

---

## Разберитесь что делает команда

```bash
ps axo rss | tail -n +2|paste -sd+ | bc
```

* Что подсчитывается этой командой
* Почему цифра такая странная

---

## Уставновим утилиту smem и проанализируем параметр PSS в ней
```bash
apt-get install smem -y
smem
```
* утилита работает какое то время, можно оставить ее в другом терминале

---

## Запустим приложеннный скрипт и понаблюдаем за процессами
```bash
python myfork.py
```
* в другом терминале  отследите порождение процессов
* отследите какие состояния вы видите у процессов
* почему появляются процессы со статусам Z
* какой PID у основного процесса
* убейте основной процесс ```kill -9 <pid>```
* какой PPID стал у первого чайлда
* насколько вы разобрались в скрипте и втом что он делает?

---

## Научимся убивать зомби процессы
* запустим еще раз наш процесс
* убьем процесс первого чайлда
* проверим его состояние  и убедимся что он зомби
* остановим основной процесс
* расскоментируем строки в скрипте
```python
      pid, status = os.waitpid(pid, 0)
      print("wait returned, pid = %d, status = %d" % (pid, status))
```
* поторим все еще раз
* отследим корректное завершение чайлда