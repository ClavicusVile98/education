Практическая работа 3

## 1. Какие принципы нарушены в проекте? Укажите конкретные файлы и объясните почему.

**Принцип DRY:**
В *OrderController* из метода *infoAction* можно выделить в отдельную функцию строки для проверки авторизации пользователя и создание сессии, чтобы не повторять код в других методах, а вызывать определенную для этого функцию.

Моя копипаста в *ProductController* с описанием товара, конечно же, портит всю картину и является отступлением от принципа DRY.

**Принцип KISS:**
В *Communication/Email* следует разбить метод *process* на две функции: ф-ция формирования тела письма и ф-ия отправки письма. В *ICommunication* то же самое.

## 2. Где в проекте уместно избавиться от магических чисел и нарушен «Закон Деметры»? Напишите почему.

**Магические числа:**
Расчет скидки в *Basket.php*, *Order.php*. В файле *Service/Discount/VipDiscount.php* есть прекрасная константа $discount = 20. Так же можно сделать и в вышеупомянутых файлах.

Во *View/product/description.html.php* и *list.html.php* есть магическая цифра, предназначенная для высчитывания колонок и строк с товарами на странице. Не уверена, насколько это критично, но ее тоже можно объявить константой.

И totalPrice в *Order/Basket.php* лучше оформить более красиво. Возможно, выделить процесс умножения скидки на 100 и деление totalPrice на результат в другую переменную. Иначе в строке 3 раза упоминается одна и та же переменная.

**Закон Деметры:**
Предположение: 
В *Service/Order/Basket.php*, в методе *getProductsInfo()*, есть обращение сначала к методу текущего класса, а затем к методу класса *Product*.
В *Service/Product/Product.php*, в методе *getInfo()*, идет обращение к методу текущего класса, который возвращает новый объект класса *Product*, но из Model/Repository/Product.
Согласно правилам закона Деметры, мы можем обращаться к методу класса, к которому относится переданный параметр, либо к методу текущего класса, либо к методу созданного внутри функции/процедуры объекта класса и еще один пункт, который я не помню. Соответственно, в функции *getInfo()* нет нарушения относительно *getProductRepository()*, но есть относительно *search()*. Мы не создаем ни новый объект внутри метода, ни обращаемся через параметр. То же самое в *Service/User/Security.php*, в методе *authentication*.

*Из плюсов: bean-компоненты в Model/Entity. Публичные методы, приватные переменные. Из книги взяла, там схожий с кодом в файлах пример.*
